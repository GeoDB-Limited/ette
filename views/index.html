{{define "head"}}
    <style>

        html {
            background: linear-gradient(to right, #669999 0%, #666699 100%);
        }

        .centered{
            border-radius: 15px;
            position: absolute;
            left: 50%;
            top: 50%;
            -webkit-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
            width: 12vmin;
            user-select: none;
            font-size: 18px;
            background-color: #00ff99;
        }

        .centered:hover{
            background-color:#00ff33;
        }

        div {
            padding: 20px;
            color: black;
            text-align: center;
        }

    </style>
{{end}}


{{define "content"}}
    <div class="centered" onclick="{ 
        if (typeof ethereum !== 'undefined') {
            ethereum.enable().then(accounts => {
                
                if(accounts.length !== 0) {
                    const from = accounts[0]

                    const msg = `address: ${from}\ntimestamp: ${Math.round(Date.now() / 1000)}`
                    const params = [msg, from]
                    const method = 'personal_sign'

                    web3.currentProvider.sendAsync({
                        method,
                        params,
                        from,
                    }, function (err, result) {
                        if (err) {
                            return console.error(err)
                        }
                        if (result.error) {
                            return console.error(result.error)
                        }

                        console.log('Signature : ' + result.result)
                    })
                } else {
                    alert('Metamask access required !')
                }

            }).catch(_ => { alert('Metamask access required !') })
        } else {
            alert('Metamask needs to be installed !')
        } }" >Login</div>
{{end}}
